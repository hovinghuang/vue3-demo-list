# Vue 3 + TypeScript + Vite

mac m1 第一次运行报错，解决方式：
```js
node node_modules/esbuild/install.js
npm run dev
```

## Vite 学习总结

#### 一、 vite 简单介绍

#### 二、 vite 使用理由

#### 三、 vite VS webpack VS rollup

#### 四、 vite 使用场景

#### 五、 vite 原理

# 开发一套微前端框架

技术栈：
前端：Vue2、Vue3、React15、React16
后端：Koa
发布平台：Express

课程目录
01 架构基础知识介绍
02 项目前期准备
03 应用开发
04 微前端框架开发
05 现有框架重写

### 带着问题去学习
## 01 什么是微前端？
将前端应用拆分成更小的模块，这些模块可以使用不同的技术栈（jQuery、Vue、React等等），模块能够独立开发、测试部署。
ToB 业务的重构，很适合使用微前端技术去解决

## 02 微前端解决什么问题？
在重构项目的时候，总会有各种各样的问题，如：
- 项目技术栈落后，重构时混用多种技术栈，导致项目技术栈混杂。
- 各个模块之间耦合严重，动一处，可能影响整体项目运转
- 因为各种历史问题不得不做出各种妥协，或者是添加各种兼容条件限制。

当你也有以上问题的时候，不妨考虑使用微前端，不仅可以拜托繁重的历史包袱，让你可以进行轻松重构，而且不会出现重构不彻底的情况，可以根据需求的实际情况进行重构工作，而不是基于项目历史债务的问题进行考虑。

这是需要学习微前端一个很重要的前提，如果你的项目没有任何历史包袱，或者说项目是从零开始的，这样就不推荐你引入微前端这个东西，这样或许不能达到预期的目的，或许只会加重自己的开发负担。

## 03 微前端实战练习
### 微前端实现方式：iframe VS 基于 SPA 的微前端架构
#### 1.1 iframe
优势：
天生支持沙箱隔离，这是最大的优势。不用做任何沙箱的处理。

劣势：
- 无法预加载缓存 iframe
- 无法共享基础库
- 事件通信限制较多
- 快捷键劫持
- 事件无法冒泡到顶层
- 跳转路径无法保持统一
- 登录状态无法共享
- iframe 加载失败，主应用无法感知
- 性能问题难以计算

#### 1.2 基于 SPA 的微前端架构
优势：
可以规避 iframe 现存的问题点

- 可缓存和预加载
- 共享登录状态
- 主应用感知加载状态
- 快捷键劫持
- 通信设计
- 共享基础库

劣势：
实现难度较高。需要实现以下几项内容

- 路由系统
- 沙箱隔离
- 样式隔离
- 通信
- html 加载和 js 解析能力
- 调试开发能力


## 04 微前端实际开发注意事项

前端架构是如何产生的

#### 设计原则

- 单一职责
- 开放封闭
- 里氏替换
- 最少知识
- 接口隔离
- 依赖倒置
- 组合 / 聚合
- 无环依赖
- 共同封装
- 共同重用
- 好莱坞
- 不要重复你自己
- 高内聚、低耦合
- 关注点分离
- 保持简单

#### 设计分层

- 系统级
- 应用级
- 模块级
- 代码级

#### 衡量标准

- 拓展性
- 维护性
- 可管理
- 高可用
- 理解难度
- 崩溃率和错误率的指标
- 接入依赖的成本
- 开发效率
- 其他辅助功能

#### 架构前期准备

- 技术前期准备包含技术选型、社区发展规模、未来发展趋势、与当前团队的契合度、执行成本、维护和迁移成本、执行效率等内容的调研和报告
- 充分调研每一项技术可能带来的利与弊
- 最大程度上预测架构设计中的缺陷，以防止问题的发生。
- 在架构发展的过程中，可能会有部分有悖于当前架构设计的实现，需要进行后期架构优化

#### 技术填补和崩溃预防
##### 1.1 技术问题的出现

- 开发实现不合理
- 暂时没有更好的实现方式
- 架构设计前期没有考虑到的细节点
- 不合理的交互，导致技术修改
- 兼容旧功能
- 修复变重构（技术债务的堆积导致问题严重）

##### 1.2 解决方案

- 优秀的架构设计是基础
- 进行合理项目拆分，尽量解耦
- 技术培训和传帮带能力
- 充分的技术方案
- 提升对技术债务重要性的认知
- 善于发现和处理一些技术债务

##### 1.3 预防

- 自动化测试
- 单元测试
- 灰度触达
- 崩溃报警
- 性能优化体系

#### 系统重构

- 架构不是永恒不变的
- 重构是对内部架构进行的调整
- 运用大量微小的改动，逐步累积为大规模重构。逐步调整项目实现
